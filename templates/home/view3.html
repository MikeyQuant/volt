{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}

{% endblock stylesheets %}

{% block content %}
<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-ans" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Answers</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-match" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Matches</button>
  </li>
</ul>
<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active" id="pills-ans" role="tabpanel" aria-labelledby="pills-home-tab">
      <div class="row">
        <div class="col-12 col-xl-8">
            <div class="row">
                <div class="col-12 mb-4">
                    <div class="card border-0 shadow">
                        <div class="card-header">
                            <div class="row align-items-center">
                                <div class="col">
                                    <h2 class="fs-5 fw-bold mb-0">Page visits</h2>
                                </div>
                                <div class="col text-end">
                                    <a href="#" class="btn btn-sm btn-primary">See all</a>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table align-items-center table-flush">
                                <thead class="thead-light">
                                <tr>
                                    <th class="border-bottom" scope="col">Answer</th>
                                    <th class="border-bottom" scope="col">Ranking Score</th>
                                    <th class="border-bottom" scope="col">Mentions</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for i in ans %}
                                <tr>
                                    <th class="text-gray-900" scope="row">
                                        {{i.ans}}
                                    </th>
                                    <td class="fw-bolder text-gray-500">
                                        {{i.score}}
                                    </td>
                                    <td class="fw-bolder text-gray-500">
                                        {{i.ta}}
                                    </td>

                                </tr>
                                {% endfor %}

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div></div></div></div>
  </div>
  <div class="tab-pane fade" id="pills-match" role="tabpanel" aria-labelledby="pills-profile-tab">
      <div class="card-body p-2">
                        {% if items is not none %}
  <h2>Top 5 Matches</h2>

<div class="accordion accordion-flush" id="accordionFlushExample">
      {% for i in items %}

  <div class="accordion-item">
  <div class="card">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#details{{i.id}}" aria-expanded="true" aria-controls="details{{i.id}}">

    <h5 class="accordion-header" id="panelsStayOpen-headingOne">
        {{i.uname}} {{i.points}}</h5></button></div>


    <div id="details{{i.id}}" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
      <div class="accordion-body">
          <div class="card">
  <div class="card-body">

          <table class="table"><tr> <th>Ranking</th><th>Your Answer</th><th>Their Answer</th></tr>

                        {% for ii in i.u_resp %}

                        <tr><td>{{loop.index0 + 1}}</td>
                            <td style="background-color:{{i.col1[loop.index0]}}"><h6>{{i.u_resp[loop.index0]}}</h6></td>
                            <td style="background-color:{{i.col2[loop.index0]}}"><h6>{{i.u2_resp[loop.index0]}}</h6></td>
                        </tr>

                        {% endfor %}
          </table></div></div></div></div></div>

  {% endfor %}
</div></div>{% endif %}</div>
  </div>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

{% endblock javascripts %}